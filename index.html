<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="DeepPersona: A Depth-First Synthetic-Persona Engine for Highly Personalized Language Models">
  <meta name="keywords" content="DeepPersona, Synthetic Personas, LLM Personalization, Human Attribute Taxonomy, AI Personalization, Social Simulation">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DeepPersona: A Depth-First Synthetic-Persona Engine for Highly Personalized Language Models</title>

  <!-- Favicon removed as requested -->
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
        rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <style>
    .hidden {
        display: none;
    }
    /* å‡å°‘éƒ¨åˆ†ä¹‹é—´çš„é—´è· */
    .section {
        padding: 0.2rem 1.5rem;
    }
    /* å‡å°‘æ ‡é¢˜ä¸å†…å®¹çš„é—´è· */
    .title {
        margin-bottom: 0.2rem !important;
    }
    /* å‡å°‘æ®µè½é—´è· */
    p {
        margin-bottom: 0.2rem !important;
    }
    .lang-switch {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .lang-btn {
      background: none;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
      border-radius: 15px;
      font-size: 14px;
      transition: all 0.3s ease;
    }
    .lang-btn.active {
      background: #3273dc;
      color: white;
    }
    .lang-btn:hover {
      background: #f0f0f0;
    }
    .lang-btn.active:hover {
      background: #2366d1;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 5px;
      border: 1px solid #ddd;
      font-size: 14px;
    }

    th, td {
        text-align: left;
        padding: 8px;
    }

    th {
        background-color: #f2f2f2;
        border-bottom: 2px solid #ddd;
    }

    td:hover {background-color: #ffffff;}
    
    .leaderboard-label {
      display: inline-block;
      padding: 4px 8px;
      margin: 2px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
    }
    
    .columns {
      display: flex;
      justify-content: center;
      width: 100%;
    }

    .column {
      flex: 1;
      min-width: 100%;
    }

    table {
      width: 100%;
      min-width: 100%;
    }

    .content.has-text-justified {
      text-align: justify;
      font-size: 1.1rem;
    }

    .centered-footer {
      text-align: center;
    }

    .hero {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .hero .title {
      color: white;
    }

    .section {
      padding: 3rem 1.5rem;
    }

    .notification {
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .tabs {
      margin-bottom: 1rem;
    }
    
    .tab-content {
      min-height: 200px;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      padding: 1rem;
    }

    .select select {
      border-radius: 6px;
      border: 2px solid #e0e0e0;
      transition: border-color 0.3s ease;
    }

    .select select:focus {
      border-color: #3273dc;
      box-shadow: 0 0 0 3px rgba(50, 115, 220, 0.1);
    }

    .box {
      border-radius: 8px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }

    .publication-links {
      margin-top: 1rem;
    }

    .publication-links .button {
      margin: 0.2rem;
    }

    .navbar {
      background-color: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
    }
  </style>
</head>
<body>

<!-- Language Switch -->
<div class="lang-switch">
  <button class="lang-btn active" onclick="switchLanguage('en')">EN</button>
  <button class="lang-btn" onclick="switchLanguage('zh')">ä¸­æ–‡</button>
</div>

<!-- Navigation bar removed as requested -->

<!-- Hero Section -->
<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">
            <span class="lang-en">DeepPersona: A Depth-First Synthetic-Persona Engine for Highly Personalized Language Models</span>
            <span class="lang-zh hidden">DeepPersonaï¼šç”¨äºé«˜åº¦ä¸ªæ€§åŒ–è¯­è¨€æ¨¡å‹çš„æ·±åº¦ä¼˜å…ˆåˆæˆäººæ ¼å¼•æ“</span>
          </h1>
          <div class="is-size-5 publication-authors">
            <span class="author-block">Zhen Wang*,</span>
            <span class="author-block">Yufan Zhou*,</span>
            <span class="author-block">Zhongyan Luo,</span>
            <span class="author-block">Adam Wood</span>
            <span class="author-block">Man Yao</span>
            <span class="author-block">Luoshang Pan</span>
          </div>
          
          <div class="is-size-5 publication-authors">
            <span class="lang-en">University of California San Diego,</span>
            <span class="lang-en">Meta AI</span>
            <span class="lang-zh hidden">åŠ å·å¤§å­¦åœ£åœ°äºšå“¥åˆ†æ ¡</span>
          </div>

          <div class="is-size-5 publication-authors">
            <span class="lang-en">*Equal contribution</span>
            <span class="lang-zh hidden">*åŒç­‰è´¡çŒ®</span>
          </div>
          
          <div class="column has-text-centered">
            <div class="publication-links">
              <span class="link-block">
                <a href="#" target="_blank" class="external-link button is-normal is-rounded is-dark">
                  <span class="icon"><i class="fas fa-file-pdf"></i></span>
                  <span class="lang-en">Paper</span>
                  <span class="lang-zh hidden">è®ºæ–‡</span>
                </a>
              </span>
              <span class="link-block">
                <a href="https://github.com/thzva/Deeppersona" target="_blank" class="external-link button is-normal is-rounded is-dark">
                  <span class="icon"><i class="fab fa-github"></i></span>
                  <span class="lang-en">Code</span>
                  <span class="lang-zh hidden">ä»£ç </span>
                </a>
              </span>
              <span class="link-block">
                <a href="https://huggingface.co/spaces/THzva/deeppersona-experience" target="_blank" class="external-link button is-normal is-rounded is-dark">
                  <span class="icon"><p style="font-size:18px">ğŸ¤—</p></span>
                  <span class="lang-en">Dataset</span>
                  <span class="lang-zh hidden">æ•°æ®é›†</span>
                </a>
              </span>
              <span class="link-block">
                <a href="#" target="_blank" class="external-link button is-normal is-rounded is-dark">
                  <span class="icon"><i class="ai ai-arxiv"></i></span>
                  <span>arXiv</span>
                </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Framework Overview -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths">
        <div class="content has-text-centered">
          <img src="static/Overview.png" style="width: 100%; border-radius: 8px;" alt="Framework Overview"/>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Abstract Section -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">
          <span class="lang-en">ğŸš€ Brief Introduction</span>
          <span class="lang-zh hidden">ğŸš€ ç®€è¦ä»‹ç»</span>
        </h2>
        <div class="content has-text-justified">
          <p class="lang-en">
            Large-scale studies that simulate humans by instilling personas into language models have begun informing personalization, social-science, and human-AI alignment research. However, existing synthetic personas comprise shallow, manually-defined attributes, severely limiting their realism and ability to capture the nuanced diversity of human identities. We propose <strong>DeepPersona</strong>, a novel generative engine for synthesizing highly detailed and customizable synthetic personas through algorithmically rigorous stages.
          </p>
          <p class="lang-zh hidden">
            é€šè¿‡å°†äººæ ¼æ³¨å…¥è¯­è¨€æ¨¡å‹æ¥æ¨¡æ‹Ÿäººç±»çš„å¤§è§„æ¨¡ç ”ç©¶å·²å¼€å§‹ä¸ºä¸ªæ€§åŒ–ã€ç¤¾ä¼šç§‘å­¦å’Œäººå·¥æ™ºèƒ½å¯¹é½ç ”ç©¶æä¾›ä¿¡æ¯ã€‚ç„¶è€Œï¼Œç°æœ‰çš„åˆæˆäººæ ¼åŒ…å«æµ…å±‚çš„ã€æ‰‹åŠ¨å®šä¹‰çš„å±æ€§ï¼Œä¸¥é‡é™åˆ¶äº†å®ƒä»¬çš„çœŸå®æ€§å’Œæ•æ‰äººç±»èº«ä»½ç»†å¾®å¤šæ ·æ€§çš„èƒ½åŠ›ã€‚æˆ‘ä»¬æå‡º<strong>DeepPersona</strong>ï¼Œä¸€ç§æ–°å‹ç”Ÿæˆå¼•æ“ï¼Œé€šè¿‡ç®—æ³•ä¸¥è°¨çš„é˜¶æ®µåˆæˆé«˜åº¦è¯¦ç»†å’Œå¯å®šåˆ¶çš„åˆæˆäººæ ¼ã€‚
          </p>


        </div>
      </div>
    </div>
  </div>
</section>

<!-- DeepPersona Profile Generator Section -->
<section class="section" style="padding: 2rem 1.5rem;">
  <div class="container">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-4" style="margin-bottom: 0.5rem;">
          <span class="lang-en">ğŸ‘¤ Profile Generator</span>
          <span class="lang-zh hidden">ğŸ‘¤ ä¸ªäººèµ„æ–™ç”Ÿæˆå™¨</span>
        </h2>
        <div class="content">
          <div class="content has-text-justified" style="margin-bottom: 0.75rem; max-width: 70%; margin-left: auto; margin-right: auto;">
            <p class="lang-en" style="font-size: 0.9rem; line-height: 1.4;">
              Generate a detailed persona profile by entering basic information. Our AI will create a comprehensive user persona summary based on your inputs.
            </p>
            <p class="lang-zh hidden" style="font-size: 0.9rem; line-height: 1.4;">
              é€šè¿‡è¾“å…¥åŸºæœ¬ä¿¡æ¯ç”Ÿæˆè¯¦ç»†çš„äººç‰©è§’è‰²ã€‚æˆ‘ä»¬çš„AIå°†æ ¹æ®æ‚¨çš„è¾“å…¥åˆ›å»ºå…¨é¢çš„ç”¨æˆ·è§’è‰²æ‘˜è¦ã€‚
            </p>
          </div>

          <!-- Category Image -->
          <div class="box" style="border: 1px solid #e0e0e0; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05); width: 70%; margin: 0 auto; padding: 0;">
            <img src="static/demo.jpg" alt="DeepPersona Categories" style="width: 100%; height: auto; display: block;">
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
@keyframes spinAround {
  from { transform: rotate(0deg); }
  to { transform: rotate(359deg); }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('personaForm');
  const summaryDisplay = document.getElementById('summaryDisplay');
  const loadingSpinner = document.getElementById('loadingSpinner');
  const errorMessage = document.getElementById('errorMessage');
  const placeholderMessage = document.getElementById('placeholderMessage');
  
  form.addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Show loading spinner
    loadingSpinner.style.display = 'block';
    errorMessage.style.display = 'none';
    summaryDisplay.style.display = 'none';
    placeholderMessage.style.display = 'none';
    
    // Get form values
    const age = document.getElementById('age').value;
    const gender = document.getElementById('gender').value;
    const occupation = document.getElementById('occupation').value;
    const location = document.getElementById('location').value;
    const personalValues = document.getElementById('personalValues').value;
    const lifeAttitude = document.getElementById('lifeAttitude').value;
    
    // Simulate API call with timeout
    setTimeout(() => {
      // Hide loading spinner
      loadingSpinner.style.display = 'none';
      
      // Generate a sample persona (in a real app, this would come from the API)
      const persona = generateSamplePersona(age, gender, occupation, location, personalValues, lifeAttitude);
      
      // Display the persona
      summaryDisplay.innerHTML = persona;
      summaryDisplay.style.display = 'block';
    }, 2000);
  });
  
  function generateSamplePersona(age, gender, occupation, location, personalValues, lifeAttitude) {
    // This is a simplified example - in a real application, this would be an API call
    const pronouns = gender === 'male' ? {subject: 'he', object: 'him', possessive: 'his'} : 
                    gender === 'female' ? {subject: 'she', object: 'her', possessive: 'her'} : 
                    {subject: 'they', object: 'them', possessive: 'their'};
    
    return `<h5>Basic Information</h5>
    <p><strong>Age:</strong> ${age}</p>
    <p><strong>Gender:</strong> ${gender}</p>
    <p><strong>Occupation:</strong> ${occupation}</p>
    <p><strong>Location:</strong> ${location}</p>
    
    <h5>Personality Profile</h5>
    <p>This ${age}-year-old ${gender} from ${location} works as a ${occupation}. ${pronouns.subject.charAt(0).toUpperCase() + pronouns.subject.slice(1)} values ${personalValues || 'personal growth and authenticity'} and approaches life with ${lifeAttitude || 'a positive and determined attitude'}.</p>
    
    <p>In ${pronouns.possessive} professional life, ${pronouns.subject} is known for being dedicated and resourceful. ${pronouns.subject.charAt(0).toUpperCase() + pronouns.subject.slice(1)} enjoys connecting with others who share similar interests and values.</p>
    
    <h5>Communication Style</h5>
    <p>${pronouns.subject.charAt(0).toUpperCase() + pronouns.subject.slice(1)} tends to communicate in a ${gender === 'female' ? 'warm and empathetic' : gender === 'male' ? 'direct and straightforward' : 'thoughtful and inclusive'} manner, often focusing on ${age < 30 ? 'new ideas and possibilities' : 'practical solutions and experiences'}.</p>`;
  }
});
</script>

<!-- Methodology Section -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">
          <span class="lang-en">ğŸ”¬ Methodology</span>
          <span class="lang-zh hidden">ğŸ”¬ æ–¹æ³•è®º</span>
        </h2>
        <div class="content has-text-justified">
          <p class="lang-en">
            We formulate the problem of synthetic persona generation as creating a narrative-complete persona with three key criteria: <strong>Depth</strong> (over 4700 attributes), <strong>Diversity</strong> (distribution approximating real humans), and <strong>Consistency</strong> (logically non-contradictory facts).
          </p>
          <p class="lang-zh hidden">
            æˆ‘ä»¬å°†åˆæˆäººæ ¼ç”Ÿæˆé—®é¢˜å®šä¹‰ä¸ºåˆ›å»ºå…·æœ‰ä¸‰ä¸ªå…³é”®æ ‡å‡†çš„å™äº‹å®Œæ•´äººæ ¼ï¼š<strong>æ·±åº¦</strong>ï¼ˆè¶…è¿‡4700ä¸ªå±æ€§ï¼‰ï¼Œ<strong>å¤šæ ·æ€§</strong>ï¼ˆåˆ†å¸ƒè¿‘ä¼¼çœŸå®äººç±»ï¼‰ï¼Œä»¥åŠ<strong>ä¸€è‡´æ€§</strong>ï¼ˆé€»è¾‘ä¸Šæ— çŸ›ç›¾çš„äº‹å®ï¼‰ã€‚
          </p>
          
          <div>
            <div style="margin-bottom: 2rem;">
              <h3 class="title is-4">
                <span class="lang-en">Problem Formulation & Overview</span>
                <span class="lang-zh hidden">é—®é¢˜å®šä¹‰ä¸æ¦‚è¿°</span>
              </h3>
              <div class="content">
                <p class="lang-en">
                  Our goal is to learn a <strong>synthesis function</strong> that returns a narrative-complete persona while respecting user-specified anchor attributes. We model persona generation as sampling from a structured distribution using:
                </p>
                <p class="lang-zh hidden">
                  æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ä¸ª<strong>åˆæˆå‡½æ•°</strong>ï¼Œåœ¨å°Šé‡ç”¨æˆ·æŒ‡å®šçš„é”šç‚¹å±æ€§çš„åŒæ—¶è¿”å›å™äº‹å®Œæ•´çš„äººæ ¼ã€‚æˆ‘ä»¬å°†äººæ ¼ç”Ÿæˆå»ºæ¨¡ä¸ºä»ç»“æ„åŒ–åˆ†å¸ƒä¸­é‡‡æ ·ï¼Œä½¿ç”¨ï¼š
                </p>
                <ul class="lang-en">
                  <li><strong>An LLM</strong> that generates attribute values and free-text narrative</li>
                  <li><strong>A universal attribute taxonomy</strong> that organizes the human-descriptive space</li>
                  <li><strong>Attribute selection</strong> guided by taxonomy coverage</li>
                  <li><strong>Value generation</strong> conditioned on evolving context for coherence</li>
                </ul>
                <ul class="lang-zh hidden">
                  <li><strong>ä¸€ä¸ªå¤§è¯­è¨€æ¨¡å‹</strong>ç”Ÿæˆå±æ€§å€¼å’Œè‡ªç”±æ–‡æœ¬å™è¿°</li>
                  <li><strong>é€šç”¨å±æ€§åˆ†ç±»æ³•</strong>ç»„ç»‡äººç±»æè¿°ç©ºé—´</li>
                  <li><strong>å±æ€§é€‰æ‹©</strong>ç”±åˆ†ç±»æ³•è¦†ç›–ç‡æŒ‡å¯¼</li>
                  <li><strong>å€¼ç”Ÿæˆ</strong>ä»¥æ¼”å˜çš„ä¸Šä¸‹æ–‡ä¸ºæ¡ä»¶ï¼Œç¡®ä¿è¿è´¯æ€§</li>
                </ul>
              </div>
            </div>
            <div>
              <h3 class="title is-4">
                <span class="lang-en">A Toolkit, Not Just a Dataset</span>
                <span class="lang-zh hidden">ä¸ä»…æ˜¯æ•°æ®é›†ï¼Œæ›´æ˜¯å·¥å…·åŒ…</span>
              </h3>
              <div class="content">
                <p class="lang-en">
                  DeepPersona is a generative engine powered by the largest and continuously extensible human attribute taxonomy to date. Researchers can:
                </p>
                <p class="lang-zh hidden">
                  DeepPersonaæ˜¯ä¸€ä¸ªç”Ÿæˆå¼•æ“ï¼Œç”±è¿„ä»Šä¸ºæ­¢æœ€å¤§ä¸”å¯æŒç»­æ‰©å±•çš„äººç±»å±æ€§åˆ†ç±»æ³•é©±åŠ¨ã€‚ç ”ç©¶äººå‘˜å¯ä»¥ï¼š
                </p>
                <ul class="lang-en">
                  <li><strong>Control anchor traits</strong> to synthesize targeted cohorts</li>
                  <li><strong>Bias depth</strong> toward specific subtrees</li>
                  <li><strong>Enhance existing shallow personas</strong> with rich details</li>
                  <li><strong>Scale to billions</strong> of richly detailed profiles</li>
                </ul>
                <ul class="lang-zh hidden">
                  <li><strong>æ§åˆ¶é”šç‚¹ç‰¹å¾</strong>åˆæˆç›®æ ‡ç¾¤ä½“</li>
                  <li><strong>åå‘æ·±åº¦</strong>é’ˆå¯¹ç‰¹å®šå­æ ‘</li>
                  <li><strong>å¢å¼ºç°æœ‰æµ…å±‚äººæ ¼</strong>æ·»åŠ ä¸°å¯Œç»†èŠ‚</li>
                  <li><strong>æ‰©å±•åˆ°æ•°åäº¿</strong>è¯¦ç»†çš„ä¸ªäººèµ„æ–™</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Contact Section -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">
          <span class="lang-en">ğŸ“¬ Contact</span>
          <span class="lang-zh hidden">ğŸ“¬ è”ç³»æ–¹å¼</span>
        </h2>
        <div class="content has-text-justified">
          <p class="lang-en">
            If you have any questions regarding DeepPersona, feel free to reach out to us via email at <a href="mailto:zhouyufan365@gmail.com">zhouyufan365@gmail.com</a> or directly submit a <a href="https://github.com/thzva/Deeppersona/issues">github issue</a>.
          </p>
          <p class="lang-zh hidden">
            å¦‚æœæ‚¨å¯¹DeepPersonaæœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶é€šè¿‡ç”µå­é‚®ä»¶<a href="mailto:zhouyufan365@gmail.com">zhouyufan365@gmail.com</a>è”ç³»æˆ‘ä»¬ï¼Œæˆ–ç›´æ¥æäº¤<a href="https://github.com/thzva/Deeppersona/issues">github issue</a>ã€‚
          </p>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- BibTeX Section -->
<section class="section" id="BibTeX">
  <div class="container is-max-desktop content">
    <h2 class="title">
      <span class="lang-en">BibTeX</span>
      <span class="lang-zh hidden">å¼•ç”¨æ ¼å¼</span>
    </h2>
    <pre><code>@article{wang2025deeppersona,
  title={DeepPersona: A Depth-First Synthetic-Persona Engine for Highly Personalized Language Models},
  author={Zhen Wang and Yufan Zhou and Zhongyan Luo and Adam Wood and Man Yao and Luoshang Pan},
  journal={arXiv preprint},
  year={2025}
}</code></pre>
  </div>
</section>
<!-- Footer -->
<footer class="footer centered-footer" style="padding: 1rem 1.5rem;">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-6">
        <div class="content" style="margin-bottom: 0;">
          <p class="lang-en">
            This website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>
          <p class="lang-zh hidden">
            æœ¬ç½‘ç«™åŸºäº<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®</a>æˆæƒã€‚
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
  function switchLanguage(lang) {
    // Update button states
    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // Toggle language content
    if (lang === 'en') {
      document.querySelectorAll('.lang-en').forEach(el => el.classList.remove('hidden'));
      document.querySelectorAll('.lang-zh').forEach(el => el.classList.add('hidden'));
    } else {
      document.querySelectorAll('.lang-en').forEach(el => el.classList.add('hidden'));
      document.querySelectorAll('.lang-zh').forEach(el => el.classList.remove('hidden'));
    }
  }

  // Data Explorer functionality
  let currentModelData = {};
  let availableModels = [
    { value: 'Google', display: 'Gemini Deep Research' },
    { value: 'gpt-4o-search-preview', display: 'GPT-4o Search Preview' },
    { value: 'Grok3deeper', display: 'Grok3 DeeperSearch' },
    { value: 'Grok3', display: 'Grok3 DeepSearch' },
    { value: 'OpenAI', display: 'OpenAI Deep Research' },
    { value: 'Perplexity', display: 'Perplexity Deep Research' },
    { value: 'sonar-reasoning-pro', display: 'Perplexity: Sonar Reasoning Pro' }
  ];

  function initializeDataExplorer() {
    const modelSelect = document.getElementById('modelSelect');
    
    // Clear existing options except the first one
    modelSelect.innerHTML = '<option value="">Choose a model...</option>';
    
    // Populate model dropdown
    availableModels.forEach(model => {
      const option = document.createElement('option');
      option.value = model.value;
      option.textContent = model.display;
      modelSelect.appendChild(option);
    });
    
    console.log('Data Explorer initialized with models:', availableModels.map(m => m.display));
  }

  async function loadModelData() {
    const modelSelect = document.getElementById('modelSelect');
    const questionSelect = document.getElementById('questionSelect');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const errorIndicator = document.getElementById('errorIndicator');
    const dataDisplay = document.getElementById('dataDisplay');
    
    const selectedModel = modelSelect.value;
    
    if (!selectedModel) {
      questionSelect.disabled = true;
      questionSelect.innerHTML = '<option value="">First select a model...</option>';
      dataDisplay.style.display = 'none';
      return;
    }

    loadingIndicator.style.display = 'block';
    errorIndicator.style.display = 'none';
    dataDisplay.style.display = 'none';

    try {
      // Use a relative path that works from the current page location
      const response = await fetch(`./static/data/user_data/${selectedModel}.json`);
      
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      
      const data = await response.json();
      currentModelData = data;
      
      // Populate question dropdown
      questionSelect.innerHTML = '<option value="">Choose a question...</option>';
      data.forEach(item => {
        const option = document.createElement('option');
        option.value = item.id;
        option.textContent = `ID ${item.id}`;
        questionSelect.appendChild(option);
      });
      
      questionSelect.disabled = false;
      loadingIndicator.style.display = 'none';
      
    } catch (error) {
      console.error('Error loading model data:', error);
      loadingIndicator.style.display = 'none';
      errorIndicator.style.display = 'block';
      questionSelect.disabled = true;
      questionSelect.innerHTML = '<option value="">Error loading data...</option>';
    }
  }

  function loadQuestionData() {
    const questionSelect = document.getElementById('questionSelect');
    const dataDisplay = document.getElementById('dataDisplay');
    const questionContent = document.getElementById('questionContent');
    const responseContent = document.getElementById('responseContent');
    const jsonContent = document.getElementById('jsonContent');
    
    const selectedId = parseInt(questionSelect.value);
    
    if (!selectedId) {
      dataDisplay.style.display = 'none';
      return;
    }

    const selectedData = currentModelData.find(item => item.id === selectedId);
    
    if (selectedData) {
      // Display question
      questionContent.innerHTML = `<div class="message"><div class="message-body">${formatText(selectedData.question || 'No question available')}</div></div>`;
      
      // Display response
      responseContent.innerHTML = `<div class="message"><div class="message-body">${formatText(selectedData.response || 'No response available')}</div></div>`;
      
      // Display raw JSON
      jsonContent.textContent = JSON.stringify(selectedData, null, 2);
      
      dataDisplay.style.display = 'block';
    }
  }

  function formatText(text) {
    if (!text) return 'No content available';
    
    // Basic formatting for better readability
    return text
      .replace(/\n\n/g, '</p><p>')
      .replace(/\n/g, '<br>')
      .replace(/^(.*)$/, '<p>$1</p>')
      .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
      .replace(/\*(.*?)\*/g, '<em>$1</em>');
  }

  function switchTab(tabName) {
    // Hide all tab contents
    document.querySelectorAll('.tab-content').forEach(tab => {
      tab.style.display = 'none';
    });
    
    // Remove active class from all tabs
    document.querySelectorAll('.tabs li').forEach(tab => {
      tab.classList.remove('is-active');
    });
    
    // Show selected tab content
    document.getElementById(tabName + 'Tab').style.display = 'block';
    
    // Add active class to selected tab
    event.target.closest('li').classList.add('is-active');
  }

  // Initialize when page loads
  document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded, initializing...');
    
    // Wait a bit for DOM to be fully ready
    setTimeout(() => {
      try {
        initializeDataExplorer();
        console.log('Initialization completed successfully');
      } catch (error) {
        console.error('Error during initialization:', error);
      }
    }, 100);
  });
</script>

</body>
</html>